var qTranslateConfig=window.qTranslateConfig;function qtranxj_ce(n,e,t,a){var i=document.createElement(n);if(e)for(var o in e)i[o]=e[o];return t&&(a&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)),i}qtranxj_get_split_blocks=function(n){var e="(\x3c!--:lang--\x3e|\x3c!--:--\x3e|\\[:lang]|\\[:]|{:lang}|{:})".replace(/lang/g,qTranslateConfig.lang_code_format),t=new RegExp(e,"gi");if(3==="a~b".split(/(~)/).length)return n.split(t);for(var a,i=0,o=[];null!=(a=t.exec(n));)o.push(n.slice(i,a.index)),1<a.length&&o.push(a[1]),i=t.lastIndex;return i<n.length&&o.push(n.slice(i)),i===n.length&&o.push(""),o},qtranxj_split=function(n){n=qtranxj_get_split_blocks(n);return qtranxj_split_blocks(n)},qtranxj_split_blocks=function(n){var e=new Object;for(r in qTranslateConfig.language_config)e[r]="";if(!n||!n.length)return e;if(1===n.length){var t=n[0];for(r in qTranslateConfig.language_config)e[r]+=t;return e}for(var a,i=new RegExp("\x3c!--:(lang)--\x3e".replace(/lang/g,qTranslateConfig.lang_code_format),"gi"),o=new RegExp("\\[:(lang)]".replace(/lang/g,qTranslateConfig.lang_code_format),"gi"),s=new RegExp("{:(lang)}".replace(/lang/g,qTranslateConfig.lang_code_format),"gi"),r=!1,l=0;l<n.length;++l){if((t=n[l]).length)if(a=i.exec(t),i.lastIndex=0,null==a)if(a=o.exec(t),o.lastIndex=0,null==a)if(a=s.exec(t),s.lastIndex=0,null==a)if("\x3c!--:--\x3e"!==t&&"[:]"!==t&&"{:}"!==t)if(r)e[r]?e[r]+=t:e[r]=t,r=!1;else for(var g in e)e[g]+=t;else r=!1;else r=a[1];else r=a[1];else r=a[1]}return e},function(w){function b(n){try{sessionStorage.setItem(_,n)}catch(n){console.log('Failed to store "'+_+'" with sessionStorage',n)}}function n(n){var h=this;this.getLanguages=function(){return qTranslateConfig.language_config},this.getFlagLocation=function(){return qTranslateConfig.flag_location},this.isLanguageEnabled=function(n){return!!qTranslateConfig.language_config[n]},qTranslateConfig.LSB?(qTranslateConfig.activeLanguage=sessionStorage.getItem(_),qTranslateConfig.activeLanguage&&this.isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language,this.isLanguageEnabled(qTranslateConfig.activeLanguage)?b(qTranslateConfig.activeLanguage):qTranslateConfig.LSB=!1)):(qTranslateConfig.activeLanguage=qTranslateConfig.language,b(qTranslateConfig.activeLanguage)),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var d={};function t(n){if(n){n.sepfield&&w(n.sepfield).remove();var e,t={};for(e in n.fields){var a=n.fields[e];t[e]=a.value,w(a).remove()}return w(n.contentField).removeClass("qtranxs-translatable"),delete d[n.contentField.id],t}}function i(n){var e,t=null;for(e in n)n[e]||(t=t||function(n){if(n[qTranslateConfig.language])return"("+qTranslateConfig.language+") "+n[qTranslateConfig.language];if(n[qTranslateConfig.default_language])return"("+qTranslateConfig.default_language+") "+n[qTranslateConfig.default_language];for(var e in n)if(n[e])return"("+e+") "+n[e];return""}(n),n[e]=t)}function o(n,e){if(!n.hasAttribute(e))return 0;var t=n.getAttribute(e),a=qtranxj_get_split_blocks(t);return a&&a.length&&1!==a.length?((t={}).nd=n,t.attr=e,t.contents=qtranxj_split_blocks(a),i(t.contents),n.setAttribute(e,t.contents[qTranslateConfig.activeLanguage]),c.push(t),1):0}this.hasContentHook=function(n){return d[n]},this.addContentHook=function(n,e,t){if(!n)return!1;switch(n.tagName){case"TEXTAREA":break;case"INPUT":switch(n.type){case"button":case"checkbox":case"password":case"radio":case"submit":return!1}break;default:return!1}if(!t){if(!n.name)return!1;t=n.name}if(n.id){if(d[n.id]){if(w.contains(document,n))return d[n.id];h.removeContentHook(n)}}else if(d[t])for(var a=0;++a,n.id=t+a,d[n.id];);else n.id=t;n.className+=" qtranxs-translatable";var i=d[n.id]={};if(i.name=t,i.contentField=n,i.lang=qTranslateConfig.activeLanguage,e)switch(e){case"slug":s="qtranslate-slugs[";break;case"term":s="qtranslate-terms[";break;default:s="qtranslate-fields["}else e="[",s="qtranslate-fields[";i.encode=e;var o,s,r,l,g=i.name.indexOf("[");if(g<0?r=s+i.name+"]":(r=s+i.name.substring(0,g)+"]",i.name.lastIndexOf("[]")<0?r+=i.name.substring(g):(g<(s=i.name.length-2)&&(r+=i.name.substring(g,s)),o="[]")),i.fields={},!qTranslateConfig.RAW){for(var c in l=qtranxj_split(n.value),n.value=l[i.lang],l){var f=r+"["+c+"]";o&&(f+=o);f=qtranxj_ce("input",{name:f,type:"hidden",className:"hidden",value:l[c]});i.fields[c]=f,n.parentNode.insertBefore(f,n)}$form=w(n).closest("form"),$form.length?$form.find('input[name="qtranslate-edit-language"]').length||qtranxj_ce("input",{type:"hidden",name:"qtranslate-edit-language",value:qTranslateConfig.activeLanguage},$form[0],!0):console.error("No form found for translatable field id=",n.id)}switch(e){case"slug":case"term":qTranslateConfig.RAW&&(l=qtranxj_split(n.value)),i.sepfield=qtranxj_ce("input",{name:r+"[qtranslate-original-value]",type:"hidden",className:"hidden",value:l[qTranslateConfig.default_language]});break;default:qTranslateConfig.RAW||(i.sepfield=qtranxj_ce("input",{name:r+"[qtranslate-separator]",type:"hidden",className:"hidden",value:e}))}return i.sepfield&&n.parentNode.insertBefore(i.sepfield,n),i},this.addContentHookC=function(n){return h.addContentHook(n,"[")},this.addContentHookB=function(n){return h.addContentHook(n,"[")},this.addContentHookById=function(n,e,t){return h.addContentHook(document.getElementById(n),e,t)},this.addContentHookByIdName=function(n){var e;switch(n[0]){case"<":case"[":e=n.substring(0,1),n=n.substring(1)}return h.addContentHookById(n,e)},this.addContentHookByIdC=function(n){return h.addContentHookById(n,"[")},this.addContentHookByIdB=function(n){return h.addContentHookById(n,"[")},this.addContentHooks=function(n,e,t){for(var a=0;a<n.length;++a){var i=n[a];h.addContentHook(i,e,t)}},this.addContentHooksByClass=function(n,e){var t;0!==n.indexOf("<")&&0!==n.indexOf("[")||(t=n.substring(0,1),n=n.substring(1)),function(n,e,t){n=(e=e||document).getElementsByClassName(n);h.addContentHooks(n,t)}(n,e,t)},this.addContentHooksByTagInClass=function(n,e,t){for(var a=t.getElementsByClassName(n),i=0;i<a.length;++i){var o=a[i].getElementsByTagName(e);h.addContentHooks(o)}},this.removeContentHook=function(n){if(!n||!n.id||!d[n.id])return!1;var e=d[n.id];return t(e),w(n).removeClass("qtranxs-translatable"),!0},this.refreshContentHook=function(n){if(!n||!n.id)return!1;var e=d[n.id];return e&&t(e),h.addContentHook(n)};var g=[],c=[];function f(n){text=n.contentField.value,n.wpautop&&window.switchEditors&&(text=window.switchEditors.wpautop(text)),n.mce.setContent(text,{format:"html"})}this.addDisplayHook=function(n){if(!n||!n.tagName)return 0;switch(n.tagName){case"TEXTAREA":return 0;case"INPUT":return"submit"===n.type&&n.value?o(n,"value"):0}var e=0;if(n.childNodes&&n.childNodes.length)for(var t=0;t<n.childNodes.length;++t){var a=n.childNodes[t];switch(a.nodeType){case 1:e+=h.addDisplayHook(a);break;case 2:case 3:e+=function(n){if(!n.nodeValue)return 0;var e=qtranxj_get_split_blocks(n.nodeValue);if(!e||!e.length||1===e.length)return 0;var t={};return t.nd=n,t.contents=qtranxj_split_blocks(e),i(t.contents),n.nodeValue=t.contents[qTranslateConfig.activeLanguage],g.push(t),1}(a)}}return e},this.addDisplayHookById=function(n){return h.addDisplayHook(document.getElementById(n))},this.addDisplayHooks=function(n){for(var e=0;e<n.length;++e){var t=n[e];h.addDisplayHook(t)}},this.addDisplayHookAttrs=function(n,e){for(var t=0;t<e.length;++t){var a=e[t];o(n,a)}},this.addDisplayHooksAttrs=function(n,e){for(var t=0;t<n.length;++t){var a=n[t];h.addDisplayHookAttrs(a,e)}},this.addDisplayHooksByClass=function(n,e){n=e.getElementsByClassName(n);h.addDisplayHooks(n)},this.addDisplayHooksByTagInClass=function(n,e,t){for(var a=t.getElementsByClassName(n),i=0;i<a.length;++i){var o=a[i].getElementsByTagName(e);h.addDisplayHooks(o)}},this.addCustomContentHooks=function(){for(var n=0;n<qTranslateConfig.custom_fields.length;++n){var e=qTranslateConfig.custom_fields[n];h.addContentHookByIdName(e)}for(n=0;n<qTranslateConfig.custom_field_classes.length;++n){var t=qTranslateConfig.custom_field_classes[n];h.addContentHooksByClass(t)}qTranslateConfig.LSB&&setTinyMceInit()},this.addContentHooksTinyMCE=function(){function a(n){var e=n.id;if(e){var t=d[e];if(t&&!t.mce){(t.mce=n).getContainer().className+=" qtranxs-translatable",n.getElement().className+=" qtranxs-translatable";e=t.updateTinyMCEonInit;return null==e&&(e=n.getContent({format:"html"}).replace(/\s+/g,"")!==t.contentField.value.replace(/\s+/g,"")),e&&f(t),t}}}setTinyMceInit=function(){if(window.tinyMCEPreInit&&window.tinyMCE)for(var n in d){var e,t=d[n];"TEXTAREA"!==t.contentField.tagName||t.mce||t.mceInit||!tinyMCEPreInit.mceInit[n]||(t.mceInit=tinyMCEPreInit.mceInit[n],t.mceInit.wpautop?(t.wpautop=t.mceInit.wpautop,(e=tinymce.DOM.select("#wp-"+n+"-wrap"))&&e.length&&(t.wrapper=e[0],t.wrapper&&(tinymce.DOM.hasClass(t.wrapper,"tmce-active")&&(t.updateTinyMCEonInit=!0),tinymce.DOM.hasClass(t.wrapper,"html-active")&&(t.updateTinyMCEonInit=!1)))):t.updateTinyMCEonInit=!1,tinyMCEPreInit.mceInit[n].init_instance_callback=function(n){a(n)})}},setTinyMceInit(),loadTinyMceHooks=function(){if(window.tinyMCE&&tinyMCE.editors)for(var n=0;n<tinyMCE.editors.length;++n){a(tinyMCE.editors[n])}},window.addEventListener("load",loadTinyMceHooks)},qTranslateConfig.onTabSwitchFunctions||(qTranslateConfig.onTabSwitchFunctions=[]),qTranslateConfig.onTabSwitchFunctionsSave||(qTranslateConfig.onTabSwitchFunctionsSave=[]),qTranslateConfig.onTabSwitchFunctionsLoad||(qTranslateConfig.onTabSwitchFunctionsLoad=[]),this.addLanguageSwitchListener=function(n){qTranslateConfig.onTabSwitchFunctions.push(n)},this.addLanguageSwitchBeforeListener=function(n){qTranslateConfig.onTabSwitchFunctionsSave.push(n)},this.delLanguageSwitchBeforeListener=function(n){for(var e=0;e<qTranslateConfig.onTabSwitchFunctionsSave.length;++e){if(qTranslateConfig.onTabSwitchFunctionsSave[e]===n)return void qTranslateConfig.onTabSwitchFunctionsSave.splice(e,1)}},this.addLanguageSwitchAfterListener=function(n){qTranslateConfig.onTabSwitchFunctionsLoad.push(n)},this.delLanguageSwitchAfterListener=function(n){for(var e=0;e<qTranslateConfig.onTabSwitchFunctionsLoad.length;++e){if(qTranslateConfig.onTabSwitchFunctionsLoad[e]===n)return void qTranslateConfig.onTabSwitchFunctionsLoad.splice(e,1)}},this.enableLanguageSwitchingButtons=function(n){var e,t=n?"block":"none";for(e in qTranslateConfig.tabSwitches){for(var a=qTranslateConfig.tabSwitches[e],i=0;i<a.length;++i){a[i].parentElement.style.display=t;break}break}};var e,a,s,C=function(){for(var n,e=document.getElementsByClassName("wrap"),t=0;t<e.length;++t){if((n=e[t].getElementsByTagName("form")).length)return n[0]}if(1===(n=document.getElementsByTagName("form")).length)return n[0];for(t=0;t<n.length;++t){var a=n[t];if((e=a.getElementsByClassName("wrap")).length)return a}return null};if("function"==typeof n.addContentHooks&&n.addContentHooks(this),qTranslateConfig.page_config&&qTranslateConfig.page_config.forms&&function(n){for(var e in n){var t,a,i,o=n[e];for(i in o.form?o.form.id?t=document.getElementById(o.form.id):o.form.jquery?t=w(o.form.jquery):!o.form.name||(a=document.getElementsByName(o.form.name))&&a.length&&(t=a[0]):t=document.getElementById(e),t=t||((t=C())||document),o.fields){var s=o.fields[i],r=[];s.container_id?(c=document.getElementById(s.container_id))&&r.push(c):s.container_jquery?r=w(s.container_jquery):s.container_class?r=document.getElementsByClassName(s.container_class):r.push(t);var l=s.encode;switch(l){case"none":continue;case"display":if(s.jquery)for(var g=0;g<r.length;++g){var c=r[g],f=w(c).find(s.jquery);s.attrs?h.addDisplayHooksAttrs(f,s.attrs):h.addDisplayHooks(f)}else{var d=s.id||i,u=document.getElementById(d);s.attrs?h.addDisplayHookAttrs(u,s.attrs):h.addDisplayHook(u)}break;case"[":case"<":case"{":case"byline":default:if(s.jquery)for(g=0;g<r.length;++g){c=r[g],f=w(c).find(s.jquery);h.addContentHooks(f,l,s.name)}else{d=s.id||i;h.addContentHookById(d,l,s.name)}}}}}(qTranslateConfig.page_config.forms),w(".i18n-multilingual").each(function(n,e){h.addContentHook(e,"[")}),w(".i18n-multilingual-curly").each(function(n,e){h.addContentHook(e,"{")}),w(".i18n-multilingual-term").each(function(n,e){h.addContentHook(e,"term")}),w(".i18n-multilingual-slug").each(function(n,e){h.addContentHook(e,"slug")}),w(".i18n-multilingual-display").each(function(n,e){h.addDisplayHook(e)}),!g.length&&!c.length){var r,l=!1;for(r in d){l=!0;break}if(!l)return}if(this.onLoadLanguage=function(n,e){for(var t=qTranslateConfig.onTabSwitchFunctionsLoad,a=0;a<t.length;++a)t[a].call(qTranslateConfig.qtx,n,e)},this.switchActiveLanguage=function(n){if(qTranslateConfig.activeLanguage!==n){if(qTranslateConfig.activeLanguage){for(var e=!0,t=qTranslateConfig.onTabSwitchFunctionsSave,a=0;a<t.length;++a){!1===t[a].call(qTranslateConfig.qtx,qTranslateConfig.activeLanguage,n)&&(e=!1)}if(!e)return;for(var i=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<i.length;++a)i[a].classList.remove(qTranslateConfig.lsb_style_active_class),w(i[a]).find(".button").removeClass("active")}var o=qTranslateConfig.activeLanguage;qTranslateConfig.activeLanguage=n,w('input[name="qtranslate-edit-language"]').val(n);for(i=qTranslateConfig.tabSwitches[qTranslateConfig.activeLanguage],a=0;a<i.length;++a)i[a].classList.add(qTranslateConfig.lsb_style_active_class),w(i[a]).find(".button").addClass("active");for(var s=qTranslateConfig.onTabSwitchFunctions,a=0;a<s.length;++a)s[a].call(qTranslateConfig.qtx,n,o);h.onLoadLanguage(n,o)}},this.clickSwitchLanguage=function(){var n=w(this).hasClass("button")?this.parentNode:this,e=n.lang;e?w(".qtranxs-lang-switch-wrap").hasClass("copying")?(h.copyContentFrom(e),w(n).find(".button").blur(),w(".qtranxs-lang-switch-wrap").removeClass("copying"),w(".qtranxs-lang-copy .button").removeClass("active")):h.switchActiveLanguage(e):alert("qTranslate-XT: This should not have happened: Please, report this incident to the developers: !lang")},this.toggleCopyFrom=function(){w(".qtranxs-lang-switch-wrap").toggleClass("copying"),w(".qtranxs-lang-copy .button").toggleClass("active"),w(".qtranxs-lang-switch-wrap").hasClass("copying")?w(".qtranxs-lang-switch").each(function(){w(this).attr("orig-title",w(this).attr("title")),w(this).attr("lang")===qTranslateConfig.activeLanguage?w(this).attr("title",qTranslateConfig.strings.CopyFromAlt):w(this).attr("title",qTranslateConfig.strings.CopyFrom+" [:"+w(this).attr("lang")+"]")}):w(".qtranxs-lang-switch").each(function(){w(this).attr("title",w(this).attr("orig-title"))})},this.copyContentFrom=function(n){var e,t=qTranslateConfig.activeLanguage,a=!1;for(e in d){var i=d[e],o=i.mce&&!i.mce.hidden,s=o?i.mce.getContent({format:"html"}):i.contentField.value;s||(s=i.fields[n].value)&&(i.contentField.value=s,o&&f(i),a=!0)}a&&h.onLoadLanguage(t,n)},this.createSetOfLSBwith=function(n){var e,t=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap "+n}),a=qTranslateConfig.language_config;for(e in qTranslateConfig.tabSwitches||(qTranslateConfig.tabSwitches={}),a){var i=a[e],o=qTranslateConfig.flag_location,s=qtranxj_ce("li",{lang:e,className:"qtranxs-lang-switch qtranxs-lang-switch-"+e,title:qTranslateConfig.strings.ShowIn+i.admin_name+" [:"+e+"]",onclick:h.clickSwitchLanguage},t),r=s;"button"===qTranslateConfig.lsb_style_subitem&&(r=qtranxj_ce("button",{className:"button button-secondary",type:"button"},s)),qtranxj_ce("img",{src:o+i.flag},r),qtranxj_ce("span",{innerHTML:i.name},r),qTranslateConfig.activeLanguage===e&&(s.classList.add(qTranslateConfig.lsb_style_active_class),w(s).find(".button").addClass("active")),qTranslateConfig.tabSwitches[e]||(qTranslateConfig.tabSwitches[e]=[]),qTranslateConfig.tabSwitches[e].push(s)}return qTranslateConfig.hide_lsb_copy_content||(n=qtranxj_ce("li",{className:"qtranxs-lang-copy"},t),n=qtranxj_ce("button",{className:"button button-secondary",type:"button",title:qTranslateConfig.strings.CopyFromAlt,onclick:h.toggleCopyFrom},n),qtranxj_ce("span",{innerHTML:qTranslateConfig.strings.CopyFrom},n)),t},this.createSetOfLSB=function(){return h.createSetOfLSBwith(qTranslateConfig.lsb_style_wrap_class+" widefat")},qTranslateConfig.LSB){this.addContentHooksTinyMCE(),!(s=document.getElementById("qtranxs-meta-box-lsb"))||(a=s.getElementsByClassName("inside")).length&&(s.className+=" closed",w(s).find(".hndle").remove(),e=document.createElement("span"),s.insertBefore(e,a[0]),e.className="hndle ui-sortable-handle",a=h.createSetOfLSBwith(qTranslateConfig.lsb_style_wrap_class),e.appendChild(a),w("#qtranxs-meta-box-lsb .hndle").unbind("click.postboxes"));var u=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var m in qTranslateConfig.page_config.anchors){var q=qTranslateConfig.page_config.anchors[m];if(T=document.getElementById(m))u.push({f:T,where:q.where});else if(q.jquery)for(var v=w(q.jquery),p=0;p<v.length;++p){var T=v[p];u.push({f:T,where:q.where})}}u.length||(T=(T=n.langSwitchWrapAnchor)||C())&&u.push({f:T,where:"before"});for(var y,p=0;p<u.length;++p){(!(q=u[p]).where||0<=q.where.indexOf("before"))&&(y=h.createSetOfLSB(),q.f.parentNode.insertBefore(y,q.f)),q.where&&0<=q.where.indexOf("after")&&(y=h.createSetOfLSB(),q.f.parentNode.insertBefore(y,q.f.nextSibling)),q.where&&0<=q.where.indexOf("first")&&(y=h.createSetOfLSB(),q.f.insertBefore(y,q.f.firstChild)),q.where&&0<=q.where.indexOf("last")&&(y=h.createSetOfLSB(),q.f.insertBefore(y,null))}this.addLanguageSwitchListener(function(n){b(n);for(var e=g.length;0<=--e;){(a=g[e]).nd.parentNode?a.nd.nodeValue=a.contents[n]:g.splice(e,1)}for(e=c.length;0<=--e;){(a=c[e]).nd.parentNode?a.nd.setAttribute(a.attr,a.contents[n]):c.splice(e,1)}if(!qTranslateConfig.RAW)for(var t in d){var a,i=(a=d[t]).mce&&!a.mce.hidden;i&&a.mce.save({format:"html"});var o=a.contentField.value.trim(),s=qtranxj_get_split_blocks(o);if(!s||s.length<=1){a.fields[a.lang].value=o,a.lang=n;o=a.fields[a.lang].value;a.contentField.placeholder&&""!==o&&(a.contentField.placeholder=""),a.contentField.value=o,i&&f(a)}else{var r,l=qtranxj_split_blocks(s);for(r in a.fields)a.fields[r].value=l[r];a.lang=n}}}),n.onTabSwitch&&this.addLanguageSwitchListener(n.onTabSwitch)}}var _="qtranslate-xt-admin-edit-language";qTranslateConfig.js.get_qtx=function(){return qTranslateConfig.qtx||(qTranslateConfig.qtx=new n(qTranslateConfig.js)),qTranslateConfig.qtx},w(function(){qTranslateConfig.js.get_qtx()})}(jQuery);